<div *ngIf="issueToIndentDetails && issueToIndentDetails.indentDetailList" class="indent-Modal">
  <div mat-dialog-title>
    <div class="row">
      <div class="col-xs-2 font-size-20">
       Issue to Indent
      </div>

      <div class="col-xs-4 mid-head-top">
        <span>
          {{issueToIndentDetails.materialName}}
        </span> 
       </div>
       <div class="col-xs-4 mid-head-top">
          <span>
           Available in Stock: 
           <span *ngIf="issueToIndentDetails.availableStock>0">
             {{issueToIndentDetails.availableStock}}
           </span> 
           <span *ngIf="issueToIndentDetails.availableStock == null">
            0
           </span> 
           {{issueToIndentDetails.materialUnit}}
        </span>
       </div>
       <div class="col-xs-2">
          <button type="button"  class="close p-t-7" (click)="onNoClick()" aria-label="Close">
              <span aria-hidden="true">Ã—</span>
            </button>
       </div>
    </div>
  </div>

  <div mat-dialog-content class="p-l-10 p-r-10">
    <div class="row">
      <div class="col-xs-12">
        <div class="row p-t-10 p-b-10 gray-border">
          <div class="col-xs-3"></div>
          <div class="col-xs-2">Required Quantity</div>
          <div class="col-xs-2">Required Date</div>
          <div class="col-xs-2">Issued Quantity</div>
          <div class="col-xs-3">To be Issued</div>
        </div>
        <form [formGroup]="materialForms " (ngSubmit)="onSubmit()">
          <div formArrayName="forms" class="row p-t-10 p-b-10 gray-border" *ngFor="let indent of issueToIndentDetails.indentDetailList; let i = index; ">
            <div class="col-xs-3 formGroup p-t-12">
              <div>
                Intend {{indent.indentId}}
              </div> 
            </div>
            <div class="col-xs-2 formGroup p-t-12 text-align-center p-r-40">
              <div>
                {{indent.quantity}}
              </div>
            </div>
            <div class="col-xs-2 formGroup p-t-12">
              <div>
                {{indent.dueDate|date: "dd-MMM-yyy"}}
              </div>
            </div>
            <div class="col-xs-2 formGroup p-t-12">
              <div class="supplier-qty-div">
                <div class="p-r-50">
                 {{indent.issuedQty}}
                </div>

                <div class="show-detail-supplier" *ngIf="indent.IssuedQuantityList">
                  <img src="../../../../assets/images/i_icon.png" />
                  <div id="detail-supplier">
                    <div class="row">
                      <div class="col-sm-6">
                        <span>Issued Date</span>
                        <ng-container *ngFor="let date of indent.IssuedQuantityList">
                          <span
                            ><br />
                            {{date.issuedDate| date: "dd-MMM-yyy"}}
                          </span>
                        </ng-container>
                      </div>
                      <div class="col-sm-6">
                        <span>Issued Quantity</span>
                        <ng-container *ngFor="let date of indent.IssuedQuantityList">
                          <span
                            ><br />
                            {{date.issuedQty}}
                          </span>
                        </ng-container>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
            <div class=" col-xs-3 formGroup">
              <mat-form-field class="col-xs-12 border-input" [formGroupName]="i">
                <input formControlName="issuedQty" (input)="showQuantityInput()" matInput type="number" [max]="num" placeholder="Issue Quantity" />
                <!-- <mat-error *ngIf="materialForms.controls.forms.controls[i].controls['issuedQty'].hasError('max') &&  materialForms.controls.forms.controls[i].controls['issuedQty'].touched"
                class="error-msg p-t-5"> Quantity should be less than available stocks. </mat-error> -->
              </mat-form-field>
              <span>{{indent.unit}}</span>
            </div>
          </div>
        </form>
      </div>
    </div>
  </div>

       
  <div mat-dialog-actions>
    <div class="col-sm-12 text-align-center">
      <small   class="error-msg" *ngIf="errorMsg">
        Sum of issued quantities should be less the quantities in available stock.
      </small>
    </div>
    <div class="col-sm-12 save-btn-add-edit-user-modal">
        <button
        mat-raised-button (click)="onNoClick()"
        class="main-color main-button pull-left"
      >
        Cancel
      </button>
      <button [disabled]="errorMsg || !materialForms.valid"
        mat-raised-button (click)="showIndent()"
        class="main-background-color main-button color-white pull-right"
      >
        Save
      </button>
    </div>
  </div>

  
</div>
<div *ngIf="issueToIndentDetails && (!issueToIndentDetails.indentDetailList)">
  <div mat-dialog-title>
    <div class="col-xs-12 no-indent-list">
      No Indent List Available for this {{issueToIndentDetails.materialName}}
    </div>
  </div>
</div>
