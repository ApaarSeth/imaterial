<div *ngIf="subscriptionsData" class="subs-data text-align-center">
  <h2 class="mt-4" [ngClass]="isMobile ? 'ml-2 mr-2' : ''">Choose a Plan That's Right for Your Business</h2>

  <ng-container *ngIf="trialAction">
    <p class="mb-2 mt-2">{{ trialDays }} FREE TRIAL</p>
  </ng-container>

  <mat-tab-group mat-align-tabs="center" disableRipple>
    <mat-tab *ngFor="let subscription of subscriptionsData">
      <ng-template mat-tab-label>
        <span *ngIf="subscription.discountPercent" class="sub-svtxt"
          [ngClass]="isMobile ? 'font-size10' : 'font-size12'">(Save {{ subscription.discountPercent }}%)</span>
        Pay {{ subscription.frequencyHeader }}
      </ng-template>


      <!-- <div class="col-md-7 col-sm-12 m-0-auto"> -->
      <div class="desp-block">
        <div class="row" [ngClass]="isMobile ? 'mt-2' : 'mt-3'">
          <div *ngFor="let plan of subscription.planList" class="col-md-4 mb-3 d-flex">
            <mat-card class="col-md-12 text-left p-0">
              <mat-card-header [className]="getClassName(plan.planName)">
                <mat-card-title>{{ plan.planName }} Plan
                  <ng-container *ngIf="plan.activeSubscription !== null">
                    <span class="font-size-12 font-weight500 mt-2">(My Plan)</span>
                  </ng-container>
                </mat-card-title>
                <mat-card-subtitle>
                  <ng-container *ngIf="plan.planName !== 'Custom'; else cstmSts">
                    <div class="pt-2 pb-3">
                      <span>
                        <ng-container *ngIf="subscription.discountPercent !== null; else flatPrice">
                          {{getSubsciptionDiscounted(subscription.discountPercent, plan.planPrice)}}
                        </ng-container>
                        <ng-template #flatPrice>
                          {{ plan.currencyCode }} {{ plan.planPrice }}
                        </ng-template>
                        <sub class="font-size-40px prc-str">*</sub>
                      </span>
                      <!-- <p>Per Additional User: {{ plan.currencyCode }}
                        {{ plan.planPrice }}</p> -->
                    </div>
                  </ng-container>
                  <ng-template #cstmSts>
                    <div class="pb-3 pl-5 pr-5 pt-3">
                      <strong>Get in touch with us for a price quote</strong>
                    </div>
                  </ng-template>
                </mat-card-subtitle>
              </mat-card-header>

              <mat-card-content [ngClass]="isMobile ? 'sm-btn1' : '' ">

                <ng-container *ngIf="plan.planName !== 'Custom'; else cstmActn">
                  <ng-container *ngIf="plan.activeSubscription === null; else sbscrbd">
                    <div class="susb-actions text-align-center p-10 d-block">
                      <button *ngIf="trialAction" mat-button class="bordered-button fbtn mr-2"
                        (click)="choosePlan('1', plan.planId, plan.offerId, plan.planPricingId, plan.planEncryptId, plan.planPricingEncryptId)">
                        Start Free Trial
                      </button>
                      <button mat-button mat-button-base class="sbtn main-background-color color-white demo-title"
                        (click)="choosePlan('0', plan.planId, plan.offerId, plan.planPricingId, plan.planEncryptId, plan.planPricingEncryptId)">
                        Buy Now
                      </button>
                    </div>
                  </ng-container>
                  <ng-template #sbscrbd>
                    <div class="susb-actions text-align-center p-10 d-block">
                      <!-- <button mat-button mat-button-base class="sbtn main-background-color color-white demo-title"
                        (click)="choosePlan('0', plan.planId, plan.offerId, plan.planPricingId, plan.planEncryptId, plan.planPricingEncryptId)">
                        Add More User
                      </button> -->
                      <button mat-button mat-button-base class="sbtn main-background-color color-white demo-title"
                        (click)="choosePlan('0', plan.planId, plan.offerId, plan.planPricingId, plan.planEncryptId, plan.planPricingEncryptId)">
                        Buy Now
                      </button>
                    </div>
                  </ng-template>
                </ng-container>
                <ng-template #cstmActn>
                  <div class="susb-actions text-align-center p-10 d-block">
                    <button mat-button mat-button-base class="sbtn main-background-color color-white demo-title"
                      (click)="contactSales()">
                      Contact Sales
                    </button>
                  </div>
                </ng-template>
              </mat-card-content>

              <ng-container *ngIf="isMobile">
                <button mat-button class="w-100" (click)="showAllFeatures($event)">
                  <span class="float-left brand-color">Show All Features</span>
                  <span class="material-icons float-right mt-2">
                    keyboard_arrow_down
                  </span>
                </button>
              </ng-container>
              <mat-card-actions class="feat-list pl-4 pb-3" [ngClass]="isMobile ? 'f-hide' : ''">
                <ul>
                  <li *ngFor="let feature of sortFeaturesObjList(plan.planFeatureObjList)"
                    [ngClass]="feature.available ? 'active' : 'inactive'">
                    <ng-container *ngIf="feature.available; else notAvailable">
                      <span class="material-icons">done</span>
                    </ng-container>
                    <ng-template #notAvailable>
                      <span class="material-icons">close</span>
                    </ng-template>
                    {{ feature.featureName }}
                  </li>
                </ul>

                <!-- <ng-container
                  *ngIf="plan.activeSubscription !== null && plan.planName !== 'Custom' && plan.isTrialActive === 0"> -->
                <ng-container
                  *ngIf="plan.activeSubscription !== null && plan.planName !== 'Custom' && plan.isTrialActive === 0">
                  <p class="text-center mt-4 mr-4 brand-color">
                    <button mat-button (click)="unsubscribePlan(plan.planId)">
                      Cancel Plan
                    </button>
                  </p>
                </ng-container>
              </mat-card-actions>
            </mat-card>
          </div>
        </div>
      </div>

    </mat-tab>
  </mat-tab-group>
  <p class="color-6d6a6a desp-block font-size14 mb-4 text-align-right">*Displayed prices all exclusive of taxes</p>
</div>