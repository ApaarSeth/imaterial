<!-- <fix-header></fix-header> -->

<div class="page-start-point" *ngIf="rfqDetails">
  <div class="create-po-dashboard p-b-20 min-height parent">
    <div class="row m-b-10">
      <div class="col-md-12">
        <!-- first row -->
        <div class="row p-t-20">
          <div class="col-xs-6 col-md-4" [ngClass]="isMobile ? 'font-size14' : ''">
            <div class="p-t-10">
              <label class="text-bold" [ngClass]="isMobile ? 'd-block mb-1' : ''">RFQ Name: </label>
              {{ rfqDetails.rfqName }}
            </div>
          </div>
          <div class="col-xs-6 col-md-4 p-t-10 text-left" [ngClass]="isMobile ? 'font-size14' : ''">
            <label class="text-bold" [ngClass]="isMobile ? 'd-block mb-1' : ''">RFQ End Date: </label>
            {{ rfqDetails.dueDate | date: "dd-MMM-yyy" }}
          </div>
          <div
            class="col-xs-12 p-l-0 p-t-10 p-b-25 text-right"
            [ngClass]="isMobile ? 'mt-2' : ''"
            *ngIf="rfqDetails.rfqCurrency != null && rfqDetails.rfqCurrency.exchangeCurrencyName != null"
          >
            <span class="base-currency p-l-5 p-r-5 p-t-10 p-b-10">
              <span class="font-size-vary-grn color-grey">
                <img width="25px" *ngIf="rfqDetails.rfqCurrency.exchangeCurrencyFlag" [src]="rfqDetails.rfqCurrency.exchangeCurrencyFlag" />
                {{ rfqDetails.rfqCurrency.exchangeCurrencyName }}
              </span>
              <span class="p-l-5"> = </span>
              <span class="p-l-5 color-6d6a6a color-grey"> {{ rfqDetails.rfqCurrency.exchangeValue }} </span>
              <span class="p-l-5 color-grey">
                <img width="25px" *ngIf="rfqDetails.rfqCurrency.primaryCurrencyFlag" [src]="rfqDetails.rfqCurrency.primaryCurrencyFlag" />
                {{ rfqDetails.rfqCurrency.primaryCurrencyName }}
              </span>
            </span>
            <div class="display-inline-block p-l-5">
              <span *ngIf="rfqDetails.rfqCurrency != null && rfqDetails.rfqCurrency.exchangeCurrencyName != null" class="p-l-5 info-icon info-tootip"
                ><img src="./../../../../assets/images/i_icon.png" class="img-responsive" />
                <span class="info-tootip__content rt-0">
                  <div class="tooltip-table ml-0" [ngClass]="isMobile ? 'mr-2 p-10 font-size14' : ''">
                    <div class="row text-center color-grey text-semi-bold p-l-5 p-r-5">
                      Supplier will have to submit the quote in this selected currency
                    </div>
                  </div>
                </span>
              </span>
            </div>
          </div>

          <!-- <div class="col-md-3 p-t-10 main-color">
                        <button mat-button class="pull-right font-size14"
                            (click)="openDialog1(rfqDetails.documentsList, rfqDetails.terms)">
                            View Terms & Conditions/Documents
                        </button>
                    </div> -->
        </div>

        <!-- second row -->
        <div class="row m-b-10">
          <div class="supplier-list-rfq-view col-md-3 main-flex" *ngFor="let supplier of rfqDetails.supplierDetails; let i = index">
            <mat-card class="w-100">
              <div class="col-md-12 text-bold supplier-company">
                <label for="company " class="word-break-all">{{ supplier.supplier_name }}</label>
              </div>
              
              <!-- <div class="ratings">
                <fieldset class="rating">
                  <input type="radio" id="{{supplier.supplierId}}" [name]="supplier.supplierId" value="5" [checked]="supplier.supplier_ratings===5" />
                  <label title="1">5</label>
        
                  <input type="radio" id="{{supplier.supplierId + 1}}" [name]="supplier.supplierId" value="4" [checked]="supplier.supplier_ratings===4" />
                  <label title="2">4</label>
        
                  <input type="radio" id="{{supplier.supplierId + 2}}" [name]="supplier.supplierId" value="3" [checked]="supplier.supplier_ratings===3" />
                  <label title="3">3</label>
        
                  <input type="radio" id="{{supplier.supplierId + 3}}" [name]="supplier.supplierId" value="2" [checked]="supplier.supplier_ratings===2" />
                  <label title="4">2</label>
        
                  <input type="radio" id="{{supplier.supplierId + 4}}" [name]="supplier.supplierId" value="1" [checked]="supplier.supplier_ratings===1" />
                  <label title="5">1</label>
                </fieldset>
              </div> -->

              <view-rating [supplierId]="supplier.supplierId" [ratings]="supplier.supplier_ratings"></view-rating>

              <!-- <div class="d-flex align-items-center rfq-rates">
                <fieldset class="rate">
                  <input type="radio" id="rating10" [name]="supplier.supplierId" [checked]="supplier.supplier_ratings > 4.6 && supplier.supplier_ratings <= 5.0" /><label for="rating10" title="5 stars"></label>
                  <input type="radio" id="rating9" [name]="supplier.supplierId" [checked]="supplier.supplier_ratings > 4.0 && supplier.supplier_ratings <= 4.6" /><label class="half" for="rating9" title="4 1/2 stars"></label>
                  <input type="radio" id="rating8" [name]="supplier.supplierId" [checked]="supplier.supplier_ratings > 3.6 && supplier.supplier_ratings <= 4.0" /><label for="rating8" title="4 stars"></label>
                  <input type="radio" id="rating7" [name]="supplier.supplierId" [checked]="supplier.supplier_ratings > 3.0 && supplier.supplier_ratings <= 3.6" /><label class="half" for="rating7" title="3 1/2 stars"></label>
                  <input type="radio" id="rating6" [name]="supplier.supplierId" [checked]="supplier.supplier_ratings > 2.6 && supplier.supplier_ratings <= 3.0" /><label for="rating6" title="3 stars"></label>
                  <input type="radio" id="rating5" [name]="supplier.supplierId" [checked]="supplier.supplier_ratings > 2.0 && supplier.supplier_ratings <= 2.6" /><label class="half" for="rating5" title="2 1/2 stars"></label>
                  <input type="radio" id="rating4" [name]="supplier.supplierId" [checked]="supplier.supplier_ratings > 1.6 && supplier.supplier_ratings <= 2.0" /><label for="rating4" title="2 stars"></label>
                  <input type="radio" id="rating3" [name]="supplier.supplierId" [checked]="supplier.supplier_ratings > 1.0 && supplier.supplier_ratings <= 1.6" /><label class="half" for="rating3" title="1 1/2 stars"></label>
                  <input type="radio" id="rating2" [name]="supplier.supplierId" [checked]="supplier.supplier_ratings > 0.6 && supplier.supplier_ratings <= 1.0" /><label for="rating2" title="1 star"></label>
                  <input type="radio" id="rating1" [name]="supplier.supplierId" [checked]="supplier.supplier_ratings > 0.0 && supplier.supplier_ratings <= 0.6" /><label class="half" for="rating1" title="1/2 star"></label>
                </fieldset>
                  
                <span class="rating-value">({{ supplier.supplier_ratings }})</span>
              </div> -->

              <div class="col-md-12">
                <label for="email" class="word-break-all">{{ supplier.email }}</label>
              </div>
              <div class="col-md-12">
                <label for="phoneNumber" class="word-break-all"> {{ supplier.countryCallingCode }}-{{ supplier.contact_no }} </label>
              </div>
              
            </mat-card>
          </div>
        </div>
      </div>
    </div>

    <mat-card class="m-b-10 p-b-10" *ngIf="this.rfqDetails.terms"
      >Payment Terms:
      <span classs="p-l-15">
        {{ this.rfqDetails.terms.termsDesc.trim() === "Others" ? this.rfqDetails.terms.otherDesc : this.rfqDetails.terms.termsDesc }}
      </span>
    </mat-card>

    <!-- Accordion/ Collapsible -->
    <mat-accordion>
      <!-- first Project -->
      <ng-template ngFor let-project [ngForOf]="rfqDetails.rfqProjectsList" let-i="index">
        <mat-expansion-panel class="myPanel" [expanded]="true">
          <mat-expansion-panel-header>
            <mat-panel-title>
              {{ project.projectName }}
              <div class="main-color p-l-15 font-size-vary-grn">
                {{ project.defaultAddress.addressLine1 }}
                {{ project.defaultAddress.addressLine2 }}
                {{ project.defaultAddress.city }}
                {{ project.defaultAddress.state }}
                {{ project.defaultAddress.pinCode }}
              </div>
            </mat-panel-title>
          </mat-expansion-panel-header>

          <!-- table -->
          <div class="add-unique-container mat-elevation-z8">
            <table mat-table [dataSource]="project.projectMaterialList">
              <!-- Material Name Column -->
              <ng-container matColumnDef="Material Name">
                <th class="font-size14" mat-header-cell *matHeaderCellDef>Material Name</th>
                <td mat-cell *matCellDef="let element">
                  {{ element.materialName }}
                </td>
              </ng-container>

              <!-- Date Column -->
              <ng-container matColumnDef="Required Date">
                <th class="font-size14" mat-header-cell *matHeaderCellDef>Required Date</th>
                <td mat-cell *matCellDef="let element">
                  {{ element.fullfilmentDate | date: "dd-MMM-yyy" }}
                </td>
              </ng-container>

              <!-- Quantity Column -->
              <ng-container matColumnDef="Quantity">
                <th class="font-size14" mat-header-cell *matHeaderCellDef class="text-align-center w-15">Quantity</th>
                <td mat-cell *matCellDef="let element" class="text-align-center w-15">
                  {{ element.rfqMaterialQty }}<span class="p-l-5">{{ element.materialUnit }}</span>
                </td>
              </ng-container>

              <!-- Makes Column -->
              <ng-container matColumnDef="Makes">
                <th class="font-size14" mat-header-cell *matHeaderCellDef>Makes</th>
                <td mat-cell *matCellDef="let element">
                  <ng-container *ngIf="element.makes.length">
                    <span class="brand-view-style m-r-5" *ngFor="let make of element.makes">
                      {{ make }}
                    </span>
                  </ng-container>
                </td>
              </ng-container>

              <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
              <tr mat-row *matRowDef="let row; columns: displayedColumns"></tr>
            </table>
          </div>
        </mat-expansion-panel>
      </ng-template>
    </mat-accordion>
  </div>
</div>
