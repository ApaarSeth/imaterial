<!-- <fix-header></fix-header> -->
<div class="page-start-point">
  <div class="p-l-20 p-r-20 p-b-20 min-height parent">
    <!-- fix part -->
    <div class="row p-t-15 p-b-10">
      <div class="col-xs-2">
        <a href="javascript:void(0)" (click)="setButtonName('projectMaterials')">
          <button
            [class.active]="buttonName == 'projectMaterials'"
            class="color-black"
            mat-button
          >
            Project & Material
          </button>
        </a>
      </div>
      <div class="col-xs-2">
        <a href="javascript:void(0)" (click)="setButtonName('addQueryMakes')">
          <button
            [class.active]="buttonName == 'addQueryMakes'"
            class="color-black"
            mat-button
          >
            Add Quantity & Makes
          </button>
        </a>
      </div>
      <div class="col-xs-2">
        <a href="javascript:void(0)" (click)="setButtonName('selectSupplier')">
          <button
            [class.active]="buttonName == 'selectSupplier'"
            class="color-black"
            mat-button
          >
            Select Supplier
          </button>
        </a>
      </div>
      <div class="col-xs-2">
        <a href="javascript:void(0)" (click)="setButtonName('uploadDocuments')">
          <button
            [class.active]="buttonName == 'uploadDocuments'"
            class="color-black"
            mat-button
          >
            Upload Documents & Terms
          </button>
        </a>
      </div>
      <div class="col-xs-2">
        <mat-form-field class="input-search-padding-zero pull-right">
          <input
            matInput
            placeholder="Search Projects"
            type="search"
            [(ngModel)]="searchText"
          />
          <button mat-button matSuffix mat-icon-button>
            <mat-icon>search</mat-icon>
          </button>
        </mat-form-field>
      </div>
      <div class="text-right col-xs-2">
        <button
          mat-raised-button
          (click)="showIndent()"
          [disabled]="!materialForms.valid"
          class="main-background-color main-button color-white"
        >
          Next
        </button>
      </div>
    </div>
    <!-- table structure -->
    <form [formGroup]="materialForms">
    <mat-accordion class="accordion-padding-zero" formArrayName="forms">
     <ng-template ngFor let-material [ngForOf]="checkedMaterialsList" let-mati="index">
      <mat-expansion-panel>
        <mat-expansion-panel-header>
          <mat-panel-title>
            {{material.projectName}}----{{mati}}
            <a href="javascript:void(0)" class="main-color p-l-15">{{material.defaultAddress.addressLine1}}</a>
          </mat-panel-title>
        </mat-expansion-panel-header>
        <!-- table part -->
        <table
        mat-table
        [dataSource]="material.projectMaterialList"
        class="mat-elevation-z8 col-sm-12"
      >
        <!--- Note that these columns can be defined in any order.
              The actual rendered columns are set as a property on the row definition" -->

        <!-- Position Column -->
        <ng-container matColumnDef="Material Name">
        <th mat-header-cell *matHeaderCellDef>Material Name</th>
        <td mat-cell *matCellDef="let element">
          {{ element.materialName }}
        </td>
        </ng-container>


        <ng-container matColumnDef="Required Date">
          <th mat-header-cell *matHeaderCellDef>Required Date</th>
          <td mat-cell *matCellDef="let element; let i = index">
            {{ element.dueDate }}
          </td>
        </ng-container>
        <!-- Name Column -->
        <ng-container matColumnDef="Requested Quantity">
          <th mat-header-cell *matHeaderCellDef>Requested Quantity</th>
        <td mat-cell *matCellDef="let element">{{ element.requestedQty }}</td>
        </ng-container>
        <!-- Name Column -->
        <ng-container matColumnDef="Estimated Quantity">
          <th mat-header-cell *matHeaderCellDef>Estimated Quantity</th>
        <td mat-cell *matCellDef="let element">{{ element.estimatedQty }}</td>
        </ng-container>
        <!-- estimated rate -->
        <ng-container matColumnDef="Estimated Rate">
          <th mat-header-cell *matHeaderCellDef>Estimated Rate</th>
        <td mat-cell *matCellDef="let element; let i = index" >
          <mat-form-field [formGroupName]="(i +  (mati ? checkedMaterialsList[mati].prevMatListLength : 0))" class="border-input table-input">
          {{i +  (mati ? checkedMaterialsList[mati].prevMatListLength : 0) }}<input matInput formControlName="estimatedRate" type="number" placeholder="Estimated Rate" />
          </mat-form-field>
        </td>
        </ng-container>
        <!-- quantity -->
        <ng-container matColumnDef="Quantity">
          <th mat-header-cell *matHeaderCellDef>Quantity</th>
        <td mat-cell *matCellDef="let element; let  i= index">
          <mat-form-field [formGroupName]="(i +  (mati ? checkedMaterialsList[mati].prevMatListLength : 0))" class="border-input table-input">
            {{i + (mati ? checkedMaterialsList[mati].prevMatListLength : 0) }} <input matInput formControlName="quantity" type="number" placeholder="Quantity" />
          </mat-form-field>
        </td>
        </ng-container>
        <!-- makes -->
        <ng-container matColumnDef="Makes">
          <th mat-header-cell *matHeaderCellDef>Makes</th>
        <td mat-cell *matCellDef="let element; let  i= index">
          <!-- <mat-form-field [formGroupName]="(i +  (mati ? checkedMaterialsList[mati].prevMatListLength : 0))" class="example-chip-list"> -->
            <app-chip (onUpdate)="makesUpdate($event, (i +  (mati ? checkedMaterialsList[mati].prevMatListLength : 0)))" ></app-chip>
        </td>
        </ng-container>

        <!-- Symbol Column -->


        <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
        <tr mat-row *matRowDef="let row; columns: displayedColumns"></tr>
      </table>
        <!-- end table part -->
      </mat-expansion-panel>
     </ng-template>
    </mat-accordion>
    </form>
    <!-- end table structure -->
    <!-- end fix part -->
  </div>
</div>
