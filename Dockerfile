# ============================================================================= 
#
# ============================================================================= 

FROM nginx:alpine
 
MAINTAINER Keshav <keshavt@umbrellainfocare.com> 

# ----------------------------------------------------------------------------- 
# Create new user and group
# ------------------------------------------------------------------------------

RUN adduser -D -g 'alpine' alpine

# ----------------------------------------------------------------------------- 
# Install 
# ----------------------------------------------------------------------------- 
  
# ----------------------------------------------------------------------------- 
# Copy content 
# ----------------------------------------------------------------------------- 

COPY dist/imaterial/ /usr/share/nginx/html/
COPY buildScripts/nginx.conf /etc/nginx/conf.d/default.conf

# ----------------------------------------------------------------------------- 
# Change owner and permission 
# ----------------------------------------------------------------------------- 

RUN chown alpine:alpine /usr/share/nginx/html/ -R
RUN chown alpine:alpine /etc/nginx/ -R
RUN chown alpine:alpine /var/log/nginx/ -R
RUN chmod 755 /var/log/nginx/ -R
RUN chown alpine:alpine /var/cache/nginx/ -R
RUN chown alpine:alpine /var/run/ -R

# ----------------------------------------------------------------------------- 
# Switch user
# ----------------------------------------------------------------------------- 

USER alpine
WORKDIR /usr/share/nginx/html/

# ----------------------------------------------------------------------------- 
# Remove extra files 
# ----------------------------------------------------------------------------- 

# ----------------------------------------------------------------------------- 
# Set ports 
# ----------------------------------------------------------------------------- 

#ENTRYPOINT ["tail", "-f", "/dev/null"]
